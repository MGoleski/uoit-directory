var app=angular.module("myApp",[]);
console.clear(),app.component("directorySearch",{controller:"searchCtrl",templateUrl:"template/template.html"}),app.controller("searchCtrl",["$scope","$filter","$http","usersService",function(e,t,r,a){var n=this;n.$onInit=function(){new Foundation.Tabs($("#tab1"));e.departments=[],e.users=[],e.currentPage=0,e.pageSize=7,a.getUsers().then(function(t){e.users=t}),a.getDepts().then(function(t){e.departments=t})},n.removeSearchResult=function(){e.searchName={}},n.modifyResultResetDropdown=function(){e.currentPage=0,e.searchName.dirschl_school_name=""},n.modifyResultClearInput=function(){e.currentPage=0,e.searchName.dirpepl_first_name="",e.searchName.dirpepl_last_name=""},n.sortBy=function(t){e.propertyName=t,e.order=t},n.smoothScroll=function(){$("html,body").animate({scrollTop:$("#angularSearch").offset().top},"slow")},n.changePageAndScroll=function(t){e.currentPage=e.currentPage+t,n.smoothScroll()},n.getData=function(){return t("filter")(e.users,e.searchName)},n.numberOfPages=function(){return Math.ceil(n.getData().length/e.pageSize)},e.processForm=function(){alert("submited"),r({method:"POST",url:"mail.php",data:$.param(e.formData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){alert("success"),console.log(e.formData),e.message="Your form was submited successfully.",e.updateForm.$setUntouched(),e.formData={}},function(t){alert("error"),e.message="Your form was NOT submited successfully."})}}]),app.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}});
app.service("usersService",["$http",function(n){var t=/-|UOIT|/g,e=/&/g,r=function(n){for(var r in n)n[r].dirschl_school_name=n[r].dirschl_school_name.replace(t,""),n[r].dirschl_school_name=n[r].dirschl_school_name.replace(e,"and");return n},c=function(n){for(var r in n)n[r]=n[r].dirschl_school_name,n[r]=n[r].replace(t,""),n[r]=n[r].replace(e,"and");return n=n.filter(function(n,t,e){return t==e.indexOf(n)}),n.sort(),n};return{get:function(){return n.get("https://communications.uoit.ca/apps/signature-generator/lib/directory.php").then(function(n){return n.data.data}).catch(function(n){console.log(n)})},getUsers:function(){return this.get().then(function(n){return r(n)})},getDepts:function(){return this.get().then(function(n){return c(n)})}}}]);